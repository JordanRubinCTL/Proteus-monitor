<!DOCTYPE html>
<html lang="en" class="chi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>üöÄ Proteus Chi Demo - Web Components Dashboard</title>
    <meta name="description" content="A modern web components application built with Chi UI and Node.js backend">
    
    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üöÄ</text></svg>">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chi CSS Framework -->
    <link rel="stylesheet" href="https://lib.lumen.com/chi/6.67.0/chi-portal.css" integrity="sha256-iA3FwGgnKpn/w8P2BwmuIqfyPvbH/pubeTjtINO9gKI=" crossorigin="anonymous">
    
    <!-- Dropdown Fix -->
    <style>
        /* Fix header overflow to allow dropdown to overflow */
        .chi-header,
        .chi-header__content,
        .chi-header__end {
            overflow: visible !important;
        }
        
        /* CRITICAL: Hide dropdown container on page load to prevent flash */
        .chi-dropdown {
            position: relative;
        }
        
        /* Ensure dropdown menu is hidden by default - multiple properties for safety */
        .chi-dropdown__menu,
        .chi-dropdown .chi-dropdown__menu {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            position: absolute;
            z-index: 99999 !important;
            background: white;
            border: 1px solid #d0d0d0;
            border-radius: 4px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
            min-width: 200px;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            transition: opacity 0.2s ease;
            pointer-events: none;
        }
        
        /* Show dropdown menu when active */
        .chi-dropdown.-active .chi-dropdown__menu {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            pointer-events: auto !important;
        }
        
        /* Position the dropdown */
        .chi-dropdown {
            position: relative;
            z-index: 10000 !important;
        }
        
        .chi-dropdown.-active {
            z-index: 10001 !important;
        }
        
        /* Extra safety - hide all dropdown menus that aren't in an active dropdown */
        .chi-dropdown:not(.-active) .chi-dropdown__menu {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
        }
        
        /* Center navigation items */
        .nav-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .nav-brand {
            display: none;
        }
        
        .nav-menu {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 auto;
        }
        
        .nav-link {
            text-decoration: none !important;
        }
        
        /* Proteus blue color for logout button, notification bell, and menu dropdown */
        #button-portal-logout,
        #button-portal-logout .chi-icon,
        #button-portal-notification2,
        #button-portal-notification2 .chi-icon,
        #button-portal-user-menu2::after {
            color: #00A9E0 !important;
        }
        
        #button-portal-logout:hover,
        #button-portal-logout:hover .chi-icon,
        #button-portal-notification2:hover,
        #button-portal-notification2:hover .chi-icon,
        #button-portal-user-menu2:hover::after {
            color: #0088b8 !important;
        }
    </style>
    
    <!-- Immediate dropdown hide script - runs before page renders -->
    <script>
        (function() {
            // Create a style element to inject critical CSS immediately
            const style = document.createElement('style');
            style.textContent = `
                .chi-dropdown__menu { 
                    display: none !important; 
                    visibility: hidden !important; 
                    opacity: 0 !important; 
                }
                .chi-dropdown:not(.-active) .chi-dropdown__menu {
                    display: none !important;
                }
            `;
            document.head.appendChild(style);
        })();
    </script>
    
    <!-- Application Styles -->
    <link rel="stylesheet" href="src/assets/css/global.css">
    <link rel="stylesheet" href="src/assets/css/loading.css">
    <link rel="stylesheet" href="src/assets/css/navigation.css">
    <link rel="stylesheet" href="src/assets/css/auth.css">
    <link rel="stylesheet" href="src/assets/css/layout.css">
    <link rel="stylesheet" href="src/assets/css/responsive.css">
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">üöÄ Proteus Standards Docker Demo</div>
        <div class="loading-subtitle">Loading Web Components...</div>
    </div>

    <!-- Chi Header -->
    <header class="chi-header -lg -impersonation">
        <div class="chi-impersonation-bar">
            <div class="chi-impersonation-bar__content">
                <span class="chi-impersonation-bar__label">Signed in as:</span>
                <strong class="chi-impersonation-bar__username">User</strong>
                <div class="chi-impersonation-bar__divider chi-divider -vertical -h--75"></div>
                <button class="chi-button -flat -xs -icon" id="button-portal-logout" aria-label="Sign out" data-tooltip="Sign out" data-position="bottom" style="color: #00A9E0;">
                    <div class="chi-button__content"><i class="chi-icon icon-logout" aria-hidden="true"></i></div>
                </button>
            </div>
        </div>
        <nav class="chi-header__content">
            <div class="chi-header__brand">
                <a class="chi-brand" href="#" aria-label="Lumen">
                    <svg viewBox="0 0 145 20" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M0 1.4332C0 .61497895.65465263.00138947 1.55466316.00138947c.94108421 0 1.55466316.61358948 1.55466316 1.43181053v14.1059263c0 .4910737.2046421.7364421.7364421.7364421H17.0602316c1.0639368 0 1.6775158.4910737 1.6775158 1.4318105 0 .9821369-.613579 1.4321474-1.6775158 1.4321474H1.67751579C.57286316 19.1395263 0 18.6895263 0 17.7073789V1.4332zm26.4292842 10.5716737c0 5.2775789 2.8639579 4.639021 8.0597474 4.639021 5.1957895 0 8.0597473.7203579 8.0597473-4.6390105V1.43330526c0-.81822105.6135895-1.4321579 1.5546632-1.4321579.9407368 0 1.5546632.61392632 1.5546632 1.4321579V12.2913053c0 6.5868736-4.0914737 7.3390526-11.1690737 7.3390526-7.0779474 0-11.1690737-.752179-11.1690737-7.3390526V1.43329474c0-.81822106.6135895-1.43214737 1.5546632-1.43214737.9410736 0 1.5546631.61391579 1.5546631 1.43214737V12.0048737zm49.5442421-7.21691581h-.1228631l-7.5276106 7.13509471c-.7579894.6447263-1.1114947 1.1864421-1.8003684 1.1864421-.5482316 0-1.0783053-.5194736-1.7589684-1.1864421l-7.5690105-7.17615786h-.163579V17.9531579c0 .8589474-.6135895 1.4318105-1.5546631 1.4318105-.9000106 0-1.5546632-.5728631-1.5546632-1.4318105V2.12864211C53.9218.9422 55.0165368.00111579 55.9264737.00111579c.9102842 0 1.6823158.54822105 2.7003895 1.59572632l7.9368947 7.78974736h.0407263l7.9372316-7.83081052C75.5772526.60853685 76.0488105.00111579 77.1189053.00111579c1.1296421 0 1.9639473.94108421 1.9639473 2.12752632V17.9531474c0 .8589473-.6135789 1.431821-1.5546631 1.431821-.9000106 0-1.5546632-.5728737-1.5546632-1.431821V4.78795789zm11.4553369 3.53818948l13.3373048.0376421c1.104653 0 1.677516.5318 1.677516 1.43181053 0 .9410737-.572863 1.4321474-1.677516 1.4321474H90.5381789v4.3115158c0 .4907368.2046422.7364421.7364422.7364421h13.5419679c1.06359 0 1.636453.4907263 1.636453 1.4318105 0 .9818-.572863 1.4318105-1.636453 1.4318105H89.1063789c-1.1046526 0-1.6775157-.4500105-1.6775157-1.4318105V8.32614737zm48.6445048 9.21771583c0 1.0636-.816863 1.8411052-1.88181 1.8411052-1.055716 0-1.762726-.8117263-2.782179-1.6775158L116.190242 4.62438947V17.9531579c0 .8182316-.613926 1.4318105-1.554663 1.4318105-.900347 0-1.554663-.6135895-1.554663-1.4318105V2.12864211c0-1.39108421.731305-2.12752632 1.840747-2.12752632 1.011242 0 1.600526.66628421 2.659316 1.55466316l15.383053 12.91983155V1.43327368c0-.81822105.613589-1.4321579 1.554663-1.4321579.900021 0 1.554673.61392632 1.554673 1.4321579V17.5438632zm2.167569-14.93333688v-.01413685c0-1.34223158 1.088147-2.47245263 2.458484-2.47245263 1.384842 0 2.458484 1.11607369 2.458484 2.45830527v.01414736c0 1.34223158-1.087789 2.47262106-2.458484 2.47262106-1.384495 0-2.458484-1.11625264-2.458484-2.45848421zm4.6344-.01413685v-.01414736c0-1.20094737-.932537-2.18989474-2.175916-2.18989474-1.229232 0-2.175916 1.00309474-2.175916 2.2040421v.01413685c0 1.20094736.932537 2.19006315 2.175916 2.19006315 1.229242 0 2.175916-1.00325263 2.175916-2.2042zm-3.136748-1.2998h1.130569c.550968 0 .960821.26841053.960821.79126316 0 .40968421-.240463.6639579-.57959.7628l.664127.94668421h-.579253l-.59341-.86181052h-.522674v.86181052h-.48059V1.29658947zm1.088137 1.24338948c.325 0 .508537-.16956842.508537-.40986316 0-.26841053-.183537-.40968421-.508537-.40968421h-.607537v.81954737h.607537z" fill="#000"></path>
                    <path d="M106.330232 1.71966316c0-.94108421-.572874-1.47287369-1.677516-1.47287369H89.1060842c-1.1043263 0-1.6771789.53178948-1.6771789 1.47287369v1.42565263l17.2648737-.0345579c1.063579-.00001052 1.636453-.49107368 1.636453-1.39109473" fill="#00A9E0"></path>
                    </svg>
                </a>
                <div class="chi-header__title -d--none -d-sm--flex" style="display: flex; align-items: center; margin-left: -2.5rem;">
                    <svg width="180" height="32" viewBox="0 0 180 32" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="proteusGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                <stop offset="0%" style="stop-color:#000000;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#2D3748;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        
                        <!-- PROTEUS text in Lumen-style font -->
                        <text x="88" y="24" font-family="'Helvetica Neue', 'Arial', sans-serif" font-size="28" font-weight="700" text-anchor="middle">
                            <tspan fill="#00A9E0" dx="0">P</tspan>
                            <tspan fill="url(#proteusGrad)" dx="-2">R</tspan>
                            <tspan fill="url(#proteusGrad)" dx="-2">O</tspan>
                            <tspan fill="url(#proteusGrad)" dx="-2">T</tspan>
                            <tspan fill="url(#proteusGrad)" dx="-2">E</tspan>
                            <tspan fill="url(#proteusGrad)" dx="-2">U</tspan>
                            <tspan fill="#00A9E0" dx="-2">S</tspan>
                        </text>
                        
                        <!-- Vertical slice through the O -->
                        <line x1="64.5" y1="2" x2="64.5" y2="27" stroke="#FFFFFF" stroke-width="2" opacity="1"/>
                        
                        <!-- Morse code accent: KJ4TLB -->
                        <!-- K: -.- -->
                        <line x1="5" y1="29" x2="13" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <circle cx="17" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <line x1="21" y1="29" x2="29" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <!-- space -->
                        <!-- J: .--- -->
                        <circle cx="35" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <line x1="39" y1="29" x2="47" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <line x1="51" y1="29" x2="59" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <line x1="63" y1="29" x2="71" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <!-- space -->
                        <!-- 4: ....- -->
                        <circle cx="77" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <circle cx="81" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <circle cx="85" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <circle cx="89" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <line x1="93" y1="29" x2="101" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <!-- space -->
                        <!-- T: - -->
                        <line x1="107" y1="29" x2="115" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <!-- space -->
                        <!-- L: .-.. -->
                        <circle cx="121" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <line x1="125" y1="29" x2="133" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <circle cx="137" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <circle cx="141" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <!-- space -->
                        <!-- B: -... -->
                        <line x1="147" y1="29" x2="155" y2="29" stroke="#C0C0C0" stroke-width="2" opacity="0.8"/>
                        <circle cx="159" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <circle cx="163" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                        <circle cx="167" cy="29" r="1" fill="#C0C0C0" opacity="0.8"/>
                    </svg>
                </div>
            </div>
            <div class="chi-header__start">
                <div class="-d--flex -d-lg--none">
                    <button class="chi-button -icon -flat chi-drawer__trigger" id="drawer-trigger-portal-pib2" data-target="#drawer-1" aria-label="Toggle navigation">
                        <div class="chi-button__content"><i class="chi-icon -sm--2 icon-menu" aria-hidden="true"></i></div>
                    </button>
                </div>
            </div>
            <div class="chi-header__end">
                <div class="-d--none -d-lg--flex">
                    <button class="chi-button -flat -icon" id="button-portal-notification2" aria-label="Notifications" data-tooltip="Notifications" data-position="bottom">
                        <div class="chi-button__content"><i class="chi-icon icon-bell-outline" aria-hidden="true"></i>
                            <div class="chi-badge -dark -xs">2</div>
                        </div>
                    </button>
                    <div class="chi-divider -vertical"></div>
                    <div class="chi-dropdown -d--none -d-lg--flex page-load-hidden" style="display: none !important;">
                        <button class="chi-button -flat chi-dropdown__trigger -px--1 -animate" id="button-portal-user-menu2" data-position="bottom-end">Menu</button>
                        <div class="chi-dropdown__menu -w--sm" style="display: none !important;">
                            <a class="chi-dropdown__menu-item" href="#"><i class="chi-icon icon-user" aria-hidden="true"></i><span>Profile Settings</span></a>
                            <a class="chi-dropdown__menu-item" href="#"><i class="chi-icon icon-settings" aria-hidden="true"></i><span>Preferences</span></a>
                            <a class="chi-dropdown__menu-item" href="#" id="azure-info-menu-link"><i class="chi-icon icon-shield" aria-hidden="true"></i><span>Azure Info</span></a>
                            <a class="chi-dropdown__menu-item" href="#"><i class="chi-icon icon-file-outline" aria-hidden="true"></i><span>Documentation</span></a>
                            <a class="chi-dropdown__menu-item" href="#"><i class="chi-icon icon-logout" aria-hidden="true"></i><span>Sign Out</span></a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        <nav class="chi-header__navbar">
            <div class="chi-header__start"></div>
            <div class="chi-header__end">
                <ul class="chi-tabs -sm">
                    <li><a class="-text--uppercase" href="#" target="_blank">Help</a></li>
                    <li><a class="-text--uppercase" href="#" target="_blank">Contact Us</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Drawer -->
    <div class="chi-backdrop -closed">
        <div class="chi-backdrop__wrapper">
            <div class="chi-drawer -left -menu -position--absolute" id="drawer-1">
                <div class="chi-drawer__header">
                    <button class="chi-button -icon -close" aria-label="Close">
                        <div class="chi-button__content">
                            <i class="chi-icon icon-x" aria-hidden="true"></i>
                        </div>
                    </button>
                </div>
                <div class="chi-drawer__content">
                    <div class="-px--2 -text">Drawer content here</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="#" class="nav-brand">
            </a>
            
            <button class="nav-toggle" id="nav-toggle" aria-label="Toggle menu">
                ‚ò∞
            </button>
            
            <ul class="nav-menu" id="nav-menu">
                <li class="nav-item">
                    <a href="#" class="nav-link active" data-page="welcome">üè† Welcome</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="dashboard">üìä Dashboard</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="buttons">üéØ Buttons</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="forms">üìù Forms</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="data">üìã Data Display</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="modals">üóÇÔ∏è Modals</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="das-health">üè• DAS Health</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-page="service-status">‚öôÔ∏è Service Status</a>
                </li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Hidden Azure AD Authentication Elements -->
        <div style="display: none;">
            <div id="msal-login-container">
                <div id="msal-loading">Loading Azure AD...</div>
                <div id="msal-user-info" style="display: none;"></div>
                <button id="msal-logout-btn" style="display: none;">Sign Out</button>
            </div>
        </div>

        <!-- Welcome Page -->
        <section id="welcome-page" class="page-section active">
            <div class="welcome-section">
                <h1 class="welcome-title">Proteus Chi Monitor</h1>
                <p class="welcome-subtitle">
                    A modern web components application built with Chi UI framework and Node.js backend
                </p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">üé®</div>
                        <h3 class="feature-title">Chi UI Components</h3>
                        <p class="feature-description">
                            Comprehensive UI components following Lumen's design system
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üîê</div>
                        <h3 class="feature-title">Azure AD Integration</h3>
                        <p class="feature-description">
                            Secure authentication with Microsoft Azure Active Directory
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">üìä</div>
                        <h3 class="feature-title">Real-time Dashboard</h3>
                        <p class="feature-description">
                            Interactive dashboards with live data and beautiful charts
                        </p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3 class="feature-title">Modern Architecture</h3>
                        <p class="feature-description">
                            Built with modern web standards and best practices
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Dashboard Page -->
        <section id="dashboard-page" class="page-section">
            <chi-dashboard></chi-dashboard>
        </section>

        <!-- Buttons Page -->
        <section id="buttons-page" class="page-section">
            <chi-button-showcase></chi-button-showcase>
        </section>

        <!-- Forms Page -->
        <section id="forms-page" class="page-section">
            <chi-form-showcase></chi-form-showcase>
        </section>

        <!-- Data Display Page -->
        <section id="data-page" class="page-section">
            <chi-data-display></chi-data-display>
        </section>

        <!-- Modals Page -->
        <section id="modals-page" class="page-section">
            <chi-modal-system></chi-modal-system>
        </section>

        <!-- DAS Health Monitor Page -->
        <section id="das-health-page" class="page-section">
            <chi-das-health-monitor></chi-das-health-monitor>
        </section>

        <!-- Azure Info Page -->
        <section id="azure-info-page" class="page-section">
            <div class="welcome-section">
                <h1 class="welcome-title">Azure AD Authentication</h1>
                <p class="welcome-subtitle">
                    Microsoft Azure Active Directory integration details and configuration
                </p>
                
                <div class="auth-config" style="margin-top: 2rem;">
                    <div id="auth-config-display"></div>
                </div>
            </div>
        </section>

        <!-- Service Status Page -->
        <section id="service-status-page" class="page-section">
            <div class="welcome-section">
                <h1 class="welcome-title">Proteus Service Status</h1>
                <p class="welcome-subtitle">
                    Real-time monitoring of critical system services
                </p>
                <div style="text-align: right; color: #666; margin-bottom: 1rem;">
                    <span id="service-status-time"></span>
                    <span style="margin-left: 1rem;">[Auto refresh every 30 seconds]</span>
                </div>
                
                <div class="chi-table -portal -striped" style="margin-top: 1rem;">
                    <table class="chi-table">
                        <thead>
                            <tr>
                                <th>Service</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="service-status-tbody">
                            <tr>
                                <td colspan="2" style="text-align: center;">Loading service status...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="chi-footer">
        <div class="chi-footer__content">
            <div class="chi-footer__internal">
                <div class="chi-footer__internal-content -mw--1200">
                    <div class="chi-footer__links">
                        <ul>
                            <li><a href="https://www.lumen.com/en-us/about.html">About Us</a></li>
                            <li><a href="https://www.lumen.com/en-us/about/accessibility.html">Accessibility</a></li>
                            <li><a href="https://www.lumen.com/en-us/about/legal/commission-for-complaints-for-telecom-television-services-ccts.html">Canadian Ombudsman</a></li>
                            <li><a href="https://jobs.lumen.com" target="_blank">Careers</a></li>
                            <li><a href="https://www.lumen.com/en-us/contact-us.html">Contact Us</a></li>
                            <li><a href="#" class="optanon-toggle-display">Cookie Settings</a></li>
                            <li><a href="https://www.lumen.com/en-us/about/governance.html">Governance</a></li>
                            <li><a href="https://www.lumen.com/en-us/about/legal.html">Legal</a></li>
                            <li><a href="https://www.lumen.com/en-us/about/legal/privacy-center.html">Privacy</a></li>
                            <li><a href="https://www.lumen.com/en-us/about/public-policy.html">Public Policy</a></li>
                            <li><a href="https://www.lumen.com/help/en-us/home.html" target="_blank">Support</a></li>
                        </ul>
                        <div class="chi-footer__copyright">&copy; 2025 Lumen Technologies. All Rights Reserved. Lumen is a registered trademark in the United States, EU and certain other countries.</div>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- External Libraries -->
    <script src="https://alcdn.msauth.net/browser/2.38.0/js/msal-browser.min.js"></script>
    <script src="https://unpkg.com/@centurylink/chi@6.67.0/dist/chi-portal.min.js"></script>

    <!-- Configuration and Services -->
    <script src="src/config/azure-config.js"></script>
    <script src="src/utils/helpers.js"></script>
    <script src="src/services/azure-auth.js"></script>
    <script src="src/services/app-service.js"></script>

    <!-- Component Scripts -->
    <script src="components/chi-base.js"></script>
    <script src="components/chi-button-showcase.js"></script>
    <script src="components/chi-form-components.js"></script>
    <script src="components/chi-dashboard.js"></script>
    <script src="components/chi-data-display.js"></script>
    <script src="components/chi-modal-system.js"></script>
    <script src="components/chi-das-health-monitor.js"></script>

    <!-- Chi UI Initialization -->
    <script>
        // Force hide dropdowns immediately on load
        (function() {
            const style = document.createElement('style');
            style.textContent = '.chi-dropdown__menu { display: none !important; }';
            document.head.insertBefore(style, document.head.firstChild);
        })();
        
        // Simple dropdown toggle without Chi JS dependency
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üîß Setting up dropdown menu...');
            
            // Ensure all dropdowns are closed on load
            document.querySelectorAll('.chi-dropdown').forEach(function(dropdown) {
                dropdown.classList.remove('-active');
            });
            
            const userMenuBtn = document.getElementById('button-portal-user-menu2');
            
            if (userMenuBtn) {
                userMenuBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    const dropdown = userMenuBtn.closest('.chi-dropdown');
                    if (dropdown) {
                        const menu = dropdown.querySelector('.chi-dropdown__menu');
                        const isActive = dropdown.classList.contains('-active');
                        
                        // Close all dropdowns first
                        document.querySelectorAll('.chi-dropdown.-active').forEach(function(dd) {
                            dd.classList.remove('-active');
                        });
                        
                        // Toggle this dropdown
                        if (!isActive) {
                            dropdown.classList.add('-active');
                            // Remove inline style to allow CSS to control visibility
                            if (menu) {
                                menu.style.display = '';
                            }
                        } else {
                            // Re-hide with inline style
                            if (menu) {
                                menu.style.display = 'none';
                            }
                        }
                        console.log('‚úÖ Dropdown toggled');
                    }
                });
                console.log('‚úÖ Menu button click handler attached');
            } else {
                console.error('‚ùå Menu button not found');
            }
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.chi-dropdown')) {
                    document.querySelectorAll('.chi-dropdown.-active').forEach(function(dropdown) {
                        dropdown.classList.remove('-active');
                    });
                }
            });
            
            console.log('‚úÖ Dropdown functionality initialized');
        });
    </script>

    <!-- Application Initialization -->
    <script>
        // Initialize Application
        let app;
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                app = new ProteusApp();
                await app.init();
                
                // Make app globally available for debugging
                window.ProteusApp = app;
                
                // Handle Azure Info menu link click
                const azureInfoLink = document.getElementById('azure-info-menu-link');
                if (azureInfoLink) {
                    azureInfoLink.addEventListener('click', (e) => {
                        e.preventDefault();
                        // Hide all page sections
                        document.querySelectorAll('.page-section').forEach(section => {
                            section.classList.remove('active');
                        });
                        // Show Azure Info page
                        const azureInfoPage = document.getElementById('azure-info-page');
                        if (azureInfoPage) {
                            azureInfoPage.classList.add('active');
                        }
                        // Remove active class from all nav links
                        document.querySelectorAll('.nav-link').forEach(link => {
                            link.classList.remove('active');
                        });
                        // Close the dropdown
                        const dropdown = document.querySelector('.chi-dropdown.-active');
                        if (dropdown) {
                            dropdown.classList.remove('-active');
                        }
                    });
                }
                
                // Service Status functionality
                let serviceStatusInterval;
                
                async function loadServiceStatus() {
                    try {
                        const response = await fetch('/api/service-status');
                        const data = await response.json();
                        
                        // Update timestamp
                        const timeElement = document.getElementById('service-status-time');
                        if (timeElement) {
                            const date = new Date(data.timestamp);
                            timeElement.textContent = date.toLocaleString();
                        }
                        
                        // Update table
                        const tbody = document.getElementById('service-status-tbody');
                        if (tbody && data.services) {
                            tbody.innerHTML = data.services.map(service => `
                                <tr>
                                    <td>${service.name}</td>
                                    <td>
                                        <span style="color: ${service.status === 'running' ? '#00A9E0' : '#DC143C'}; font-weight: 600;">
                                            ${service.status === 'running' ? '‚úì Running' : '‚úó Not Running'}
                                        </span>
                                    </td>
                                </tr>
                            `).join('');
                        }
                    } catch (error) {
                        console.error('Error loading service status:', error);
                        const tbody = document.getElementById('service-status-tbody');
                        if (tbody) {
                            tbody.innerHTML = '<tr><td colspan="2" style="text-align: center; color: #DC143C;">Error loading service status</td></tr>';
                        }
                    }
                }
                
                // Watch for service status page activation
                const observer = new MutationObserver(() => {
                    const serviceStatusPage = document.getElementById('service-status-page');
                    if (serviceStatusPage && serviceStatusPage.classList.contains('active')) {
                        loadServiceStatus();
                        if (!serviceStatusInterval) {
                            serviceStatusInterval = setInterval(loadServiceStatus, 30000); // Refresh every 30 seconds
                        }
                    } else {
                        if (serviceStatusInterval) {
                            clearInterval(serviceStatusInterval);
                            serviceStatusInterval = null;
                        }
                    }
                });
                
                observer.observe(document.body, {
                    attributes: true,
                    subtree: true,
                    attributeFilter: ['class']
                });
                
                console.log('üöÄ Proteus Chi Monitor initialized successfully!');
            } catch (error) {
                console.error('‚ùå Failed to initialize application:', error);
            }
        });

        // Show dropdown after page completely loads
        window.addEventListener('load', function() {
            // Wait for all web components to be fully loaded and rendered
            setTimeout(function() {
                const dropdown = document.querySelector('.chi-dropdown.page-load-hidden');
                if (dropdown) {
                    dropdown.style.display = '';
                    dropdown.classList.remove('page-load-hidden');
                    console.log('‚úÖ Dropdown shown after page load');
                }
            }, 1500); // Wait 1.5 seconds after page load to ensure all components are rendered
        });

        // Service Worker Registration (for PWA capabilities)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // Optional: Register service worker for offline functionality
                console.log('Service Worker support detected');
            });
        }
    </script>
</body>
</html>